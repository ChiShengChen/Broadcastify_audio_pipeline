# ASR 模型數字處理分析報告

## 概述

本報告分析了不同 ASR 模型如何處理數字，基於對 EMS 無線電通訊音頻的轉錄結果。分析涵蓋了 4 個主要 ASR 模型：Whisper Large-v3、Wav2Vec2、Parakeet TDT 0.6B v2 和 Canary-1B。

## 關鍵發現

### 1. 數字處理準確率差異巨大

| 模型 | 數字處理準確率 | 正確識別數量 |
|------|----------------|--------------|
| **Whisper Large-v3** | **51.1%** | 185/362 |
| Wav2Vec2 | 0.0% | 0/362 |
| Parakeet TDT 0.6B v2 | 0.0% | 0/362 |
| Canary-1B | 0.0% | 0/362 |

**結論**：只有 Whisper Large-v3 能夠有效處理數字，其他模型幾乎完全無法識別數字。

### 2. 數字類型分析

分析了 362 個數字實例，分為以下類型：

| 數字類型 | 數量 | 示例 | 說明 |
|----------|------|------|------|
| **時間格式** | 33 | `11:17`, `20:28` | 時間戳記 |
| **電話代碼** | 15 | `6-1-2`, `5-0-1` | 電話號碼格式 |
| **地址號碼** | 43 | `4560`, `132` | 街道地址 |
| **單個數字** | 134 | `1`, `2`, `3` | 單位編號、數量 |
| **雙位數字** | 137 | `11`, `20`, `95` | 年齡、編號等 |

### 3. Whisper Large-v3 的數字處理能力

Whisper Large-v3 能夠正確識別：
- ✅ **地址號碼**：`4560`, `132`, `1541`, `1952` 等
- ✅ **雙位數字**：`11`, `12`, `15`, `16`, `17`, `22`, `25`, `29`, `35`, `40`, `48`, `60`, `62`, `64`, `66`, `73`, `77`, `82`, `87`, `89`, `92`, `95` 等
- ✅ **單個數字**：`4`, `7`, `8`, `9` 等
- ❌ **時間格式**：`11:17`, `20:28` 等（幾乎全部失敗）
- ❌ **電話代碼**：`6-1-2`, `5-0-1` 等（幾乎全部失敗）

## 模型特性分析

### Whisper Large-v3
**優勢**：
- 能夠識別大部分數字
- 對地址號碼和一般數字有較好的理解
- 上下文理解能力強

**弱點**：
- 時間格式識別困難
- 電話代碼格式處理不佳
- 某些數字仍會被忽略

### 其他模型（Wav2Vec2、Parakeet、Canary）
**共同問題**：
- 幾乎完全無法識別數字
- 將數字轉換為無意義的音節或詞彙
- 缺乏數字語義理解

## 實際轉錄示例對比

### Ground Truth
```
"rescue 8, 1424P can you respond to an illness 612 6-1-2 jack rabbit road"
```

### 各模型轉錄結果

**Whisper Large-v3**：
```
"rescue eight one four two fourp can you respond to an illness six one two six one two jack rabbit road"
```
- ✅ 正確識別了大部分數字
- ✅ 將數字轉換為詞彙形式

**Wav2Vec2**：
```
"E RIMOU SE OLSIN COMMANS E BLE PA FOMOUN PEOPL BE ON THE OFFTI..."
```
- ❌ 完全無法識別數字
- ❌ 產生無意義的音節

**Parakeet TDT 0.6B v2**：
```
"rive on sc i' see come in see bothll come out be locally on the offideety seven..."
```
- ❌ 數字被轉換為無關詞彙
- ❌ 缺乏數字語義

**Canary-1B**：
```
"I'll see if I can command, I'll see Bulls Bay command..."
```
- ❌ 數字完全丟失
- ❌ 語義理解偏差

## 對 Ground Truth 預處理的影響

### 預處理的必要性

基於分析結果，ground truth 預處理對於數字處理至關重要：

1. **數字格式標準化**：
   - 將 `612` 轉換為 `six one two`
   - 將 `11:17` 轉換為 `eleven seventeen`
   - 將 `6-1-2` 轉換為 `six one two`

2. **提高匹配率**：
   - Whisper 模型傾向於輸出詞彙形式的數字
   - 預處理可以讓 ground truth 與模型輸出格式一致

3. **改善 WER 計算**：
   - 標準化數字格式可以減少不必要的錯誤
   - 提高評估的公平性

### 預處理策略建議

**對於 Whisper Large-v3**：
- 使用保守模式預處理
- 主要處理時間格式和電話代碼
- 保持地址號碼的數字格式

**對於其他模型**：
- 使用激進模式預處理
- 將所有數字轉換為詞彙形式
- 標準化所有數字格式

## 技術原因分析

### 為什麼 Whisper 表現更好？

1. **訓練數據多樣性**：
   - Whisper 在更多樣化的數據上訓練
   - 包含更多數字語義的語音數據

2. **模型架構**：
   - Transformer 架構對上下文理解更強
   - 能夠學習數字與語境的關係

3. **解碼策略**：
   - Whisper 使用更先進的解碼算法
   - 能夠在數字和詞彙之間做出正確選擇

### 其他模型的限制

1. **訓練數據偏向**：
   - 主要訓練於特定領域數據
   - 缺乏數字語義的多樣性

2. **架構限制**：
   - CTC 架構對序列建模的限制
   - 缺乏足夠的上下文理解能力

3. **解碼策略**：
   - 簡單的貪婪解碼
   - 無法處理複雜的數字語義

## 實際應用建議

### 1. 模型選擇
- **主要使用 Whisper Large-v3**：數字處理能力最強
- **其他模型作為備選**：用於特定場景或資源限制情況

### 2. 預處理策略
- **Whisper 模型**：保守預處理，主要處理時間和電話格式
- **其他模型**：激進預處理，全面數字標準化

### 3. 評估方法
- **分開評估**：數字部分和非數字部分分別評估
- **加權 WER**：對數字錯誤給予更高權重
- **語義評估**：不僅看字面匹配，還要考慮語義正確性

### 4. 後處理優化
- **數字後處理**：對模型輸出進行數字格式標準化
- **語義校驗**：檢查數字的語義合理性
- **上下文驗證**：確保數字與上下文一致

## 結論

1. **Whisper Large-v3 是數字處理的最佳選擇**，準確率達到 51.1%
2. **其他模型在數字處理方面表現極差**，需要大量預處理
3. **Ground truth 預處理對提高評估準確性至關重要**
4. **不同模型需要不同的預處理策略**
5. **數字處理能力是選擇 ASR 模型的重要考慮因素**

這個分析為 ASR 系統的優化和 ground truth 預處理提供了重要的指導方向。 